---
# yaml-language-server: $schema=https://taskfile.dev/schema.json
version: '3'

tasks:

  apply-opnsense-bgp-label-to-all-nodes:
    desc: Applies a 'bgp-peering-policy' label with a value of 'opnsense' to all cluster nodes
    cmds:
      - kubectl label nodes --all bgp-peering-policy=opnsense

  status-verbose:
    desc:
    cmds:
      - kubectl exec ds/cilium -n kube-system -- cilium status verbose

  get-endpoint-list:
    desc: Uses the cilium binary in the daemonset to query the endpoints list
    cmds:
      - kubectl -n kube-system exec ds/cilium -- cilium endpoint list
