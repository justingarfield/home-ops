# yaml-language-server: $schema=https://taskfile.dev/schema.json
---
version: '3'

tasks:

  ensure-directory-exists:
    desc: Creates a directory (and any sub-directories) if needed.
    internal: true
    vars:
      DIRECTORY: '{{ .DIRECTORY | replace "./{{ .OUTPUT_DIR }}" "" | replace .OUTPUT_DIR "" }}'
    preconditions:
      - test "{{ .OUTPUT_DIR }}/{{ .DIRECTORY }}"
    cmds:
      - mkdir -p "{{ .OUTPUT_DIR }}/{{ .DIRECTORY }}"
    status:
      - test -d "{{ .OUTPUT_DIR }}/{{ .DIRECTORY }}"
