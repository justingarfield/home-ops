# yaml-language-server: $schema=https://taskfile.dev/schema.json
---
version: '3'

tasks:

  ensure-directory-exists:
    desc: Creates a directory (and any sub-directories) if needed.
    internal: true
    vars:
      DIRECTORY: '{{ .DIRECTORY | replace "./{{ .OUTPUT_DIR }}" "" | replace .OUTPUT_DIR "" }}'
    #preconditions:
    #  - test "{{ .OUTPUT_DIR }}/{{ .DIRECTORY }}"
    cmds:
      - mkdir -p "{{ .OUTPUT_DIR }}/{{ .DIRECTORY }}"
    #status:
    #  - test -d "{{ .OUTPUT_DIR }}/{{ .DIRECTORY }}"

  sleep-for-resource-contention:
    desc: Does a simple 'sleep' for a particular duration in-seconds (default 5-seconds)
    vars:
      SLEEP_DURATION_IN_SECONDS: '{{ .SLEEP_DURATION_IN_SECONDS | default 5 }}'
    cmds:
      - sleep {{.SLEEP_DURATION_IN_SECONDS}}
