---
# yaml-language-server: $schema=https://talos.dev/v1.4/schemas/v1alpha1_config.schema.json

# This patch file:
#   * Configures a node to have disk encryption for the state partition,
#     with its key generated by the node's hardware profile
#   * Configures a node to have disk encryption for the ephemeral partition,
#     with its key needing to be patched-in during "talosctl gen config ..."

machine:
  systemDiskEncryption:
    state:
      provider: luks2
      keys:
        - nodeID: { }
          slot: 0
    ephemeral:
      provider: luks2
