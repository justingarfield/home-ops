---
apiVersion: kustomize.toolkit.fluxcd.io/v1
kind: Kustomization
metadata:
  name: pod-gateway
  namespace: pod-gateway
spec:
  patches:
    - patch: |
        - op: add
          path: /data/settings.sh
          value: |
            #!/bin/sh
            # Generated by pod-gateway
            DNS_LOCAL_CIDRS="local"
            NOT_ROUTED_TO_GATEWAY_CIDRS=""
            VPN_BLOCK_OTHER_TRAFFIC="true"
            VPN_INTERFACE="tun0"
            VPN_LOCAL_CIDRS="10.0.0.0/8 192.168.0.0/16"
            VPN_TRAFFIC_PORT="1197"
            VXLAN_GATEWAY_FIRST_DYNAMIC_IP="20"
            VXLAN_ID="42"
            VXLAN_IP_NETWORK="172.16.0"
      target:
        kind: ConfigMap
        name: pod-gateway
        namespace: pod-gateway
